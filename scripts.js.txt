// JavaScript for switching between tabs
let currentChart;

function loadChart(symbol) {
    // Destroy previous chart if exists
    if (currentChart) {
        currentChart.remove();
    }

    // Create a new TradingView chart
    currentChart = new TradingView.widget({
        container_id: "chart",
        width: "100%",
        height: "100%",
        symbol: symbol,
        interval: "1D",
        timezone: "Etc/UTC",
        theme: "dark",
        locale: "en",
        toolbar_bg: "#1c1f26",
        details: true,
        hotlist: true,
        news: ["headlines"]
    });
}

const cryptoTab = document.getElementById('cryptoTab');
const stocksTab = document.getElementById('stocksTab');
const newsTab = document.getElementById('newsTab');
const chartsContainer = document.getElementById('charts');
const newsContainer = document.getElementById('news');

const showCryptoChart = () => {
    loadChart('BINANCE:BTCUSDT'); // Load Crypto chart
    chartsContainer.classList.remove('hidden');
    newsContainer.classList.add('hidden');
};

const showStocksChart = () => {
    loadChart('NASDAQ:AAPL'); // Load Stock chart
    chartsContainer.classList.remove('hidden');
    newsContainer.classList.add('hidden');
};

const showNewsSection = () => {
    chartsContainer.classList.add('hidden');
    newsContainer.classList.remove('hidden');
};

// Add event listeners for the tabs
cryptoTab.addEventListener('click', showCryptoChart);
stocksTab.addEventListener('click', showStocksChart);
newsTab.addEventListener('click', showNewsSection);

// Default view on page load
showCryptoChart();